---
all:
  vars:
    ansible_user: Administrator
    ansible_password: P@ssw0rd123!  # Change this!
    ansible_connection: winrm
    ansible_winrm_transport: basic
    ansible_winrm_server_cert_validation: ignore
    ansible_winrm_scheme: http
    ansible_port: 5985

    # Domain configuration
    domain_name: lab.local
    domain_netbios_name: LAB
    domain_admin_user: Administrator
    domain_admin_password: P@ssw0rd123!

    # SQL Server configuration
    sql_service_account: sqlservice
    sql_service_password: SQLSvc@123!
    sql_agent_account: sqlagent
    sql_agent_password: SQLAgent@123!
    sql_sa_password: SA@Password123!

    # SQL AG configuration - Multi-Subnet
    ag_name: AG01
    ag_listener_name: ag01-listener
    ag_listener_port: 1433
    # Multi-subnet AG requires multiple listener IPs (one per subnet)
    ag_listener_ips:
      - 192.168.101.15  # SQL Subnet 1 (sql01)
      - 192.168.102.15  # SQL Subnet 2 (sql02)
      - 192.168.103.15  # SQL Subnet 3 (sql03)

    # Cluster configuration - Multi-Subnet
    cluster_name: SQLCLUSTER
    # Multi-subnet cluster requires multiple IPs (one per subnet)
    cluster_ips:
      - 192.168.101.14  # SQL Subnet 1
      - 192.168.102.14  # SQL Subnet 2
      - 192.168.103.14  # SQL Subnet 3

  children:
    windows:
      children:
        domain_controllers:
          hosts:
            dc01:
              ansible_host: 192.168.100.10

        sql_servers:
          hosts:
            sql01:
              ansible_host: 192.168.101.11
              subnet: sql1
              subnet_cidr: 192.168.101.0/24
              sql_instance_name: MSSQLSERVER
              is_primary_replica: true
            sql02:
              ansible_host: 192.168.102.12
              subnet: sql2
              subnet_cidr: 192.168.102.0/24
              sql_instance_name: MSSQLSERVER
              is_primary_replica: false
            sql03:
              ansible_host: 192.168.103.13
              subnet: sql3
              subnet_cidr: 192.168.103.0/24
              sql_instance_name: MSSQLSERVER
              is_primary_replica: false

    linux:
      children:
        application_servers:
          hosts:
            app01:
              ansible_host: 192.168.100.20
              ansible_connection: ssh
              ansible_user: ubuntu
              ansible_become: yes
